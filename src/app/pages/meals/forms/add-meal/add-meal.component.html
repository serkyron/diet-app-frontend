<div class="add-meal-form">
  <nb-card class="add-meal-card">
    <nb-card-header>{{ title }}</nb-card-header>
    <nb-card-body>
      <form [formGroup]="formGroup">
        <div class="form-group meal-name-group">
          <label for="mealName" class="label">Name</label>
          <input formControlName="name" type="text" nbInput fullWidth id="mealName" placeholder="">
          <span *ngIf="isControlInvalid('name')" class="validation-error-text">
              <span>*</span> Meal name is required
            </span>
        </div>
        <div class="added-ingredients">
          <span *ngIf="mealIngredients.length === 0">...</span>
          <span *ngFor="let mealIngredient of mealIngredients" class="ingredient-label">
            {{mealIngredient.ingredient.name}} - {{mealIngredient.amount}}g
            <nb-icon (click)="removeIngredient(mealIngredient.ingredient.id)" class="remove-ingredient" icon="close"></nb-icon>
          </span>
        </div>
        <label class="label">Ingredient</label>
        <div class="form-group">
          <ng-select [items]="ingredients"
                     bindLabel="title"
                     formControlName="ingredient"
                     groupBy="category">
            <ng-template ng-optgroup-tmp let-item="item">
              {{item.category || 'Unnamed group'}}
            </ng-template>
          </ng-select>
        </div>
        <div class="form-group">
          <label for="amount" class="label">Amount (g)</label>
          <input formControlName="amount" type="number" nbInput fullWidth id="amount">
        </div>
        <nb-card>
          <button (click)="addIngredient()" class="btn-info add-ingredient-btn">ADD</button>
        </nb-card>
        <button [disabled]="formGroup.invalid" class="submit-btn" (click)="submit()" type="submit" nbButton status="danger">Submit</button>
      </form>
    </nb-card-body>
  </nb-card>
</div>
